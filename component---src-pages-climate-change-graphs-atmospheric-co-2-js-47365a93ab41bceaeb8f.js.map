{"version":3,"file":"component---src-pages-climate-change-graphs-atmospheric-co-2-js-47365a93ab41bceaeb8f.js","mappings":"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","sources":["webpack://personal-website/./node_modules/d3-fetch/src/text.js","webpack://personal-website/./src/pages/climate-change/graphs/atmosphericCo2.js"],"sourcesContent":["function responseText(response) {\n  if (!response.ok) throw new Error(response.status + \" \" + response.statusText);\n  return response.text();\n}\n\nexport default function(input, init) {\n  return fetch(input, init).then(responseText);\n}\n","import React, { useState, useEffect } from 'react';\nimport ReactEcharts from 'echarts-for-react';\nimport * as echarts from 'echarts';\nimport { text } from 'd3-fetch';\nimport styled from 'styled-components';\n\nimport { Link } from 'gatsby';\nimport { initialOption, initialDataZoom } from './common';\n\nconst Graph = styled.div`\n   width: 100%;\n    box-sizing: border-box;\n    margin-right: auto;\n    margin-left: auto;\n    padding-top: 1.5em;\n    padding-bottom: 1.5em;\n`;\n\nconst Source = styled.div`\n  font-size: small;\n`;\n\nconst GraphTitle = styled.div`\n  font-weight: bold;\n`;\n\nconst GraphDescription = styled.div`\n`;\n\nconst AtmosphericCo2 = () => {\n  const [option, updateOption] = useState(initialOption());\n\n  const loadData = async () => {\n    const data = [];\n    const splitDate = 1959;\n\n    const [icecoreObj, mloObj] = await Promise.all([\n      text('/data/antarctica2015co2composite.txt'),\n      text('/data/co2_annmean_mlo.txt'),\n    ]);\n\n    icecoreObj.split('\\n')\n      .filter((d) => !d.startsWith('#'))\n      .map((d) => {\n        const r = d.split(' ').filter(d => d);\n        return [1950 - +r[0], +r[1]];\n      })\n      // eslint-disable-next-line no-restricted-globals\n      .filter(d => d[0] < splitDate && isFinite(d[1]))\n      .reverse()\n      .forEach((d) => {\n        data.push(d);\n      });\n\n    mloObj.split('\\n')\n      .filter(d => d[0] !== '#')\n      .map((d) => {\n        const r = d.split('   ');\n        return [+r[0], +r[1]];\n      })\n      .filter(d => d[0] >= splitDate)\n      .forEach((d) => { data.push(d); });\n\n    const newOption = initialOption();\n\n    newOption.xAxis.type = 'value';\n    newOption.xAxis.axisLabel = {\n      formatter(e) { return e.toString(); },\n    };\n    newOption.xAxis.min = -900000;\n    newOption.yAxis.min = 150;\n    newOption.yAxis.max = 430;\n\n    newOption.dataZoom = initialDataZoom();\n    newOption.dataZoom[0].startValue = -40000;\n\n    newOption.grid.bottom = 60;\n\n    newOption.tooltip.formatter = (e) => {\n      const yValue = e[0].data[1];\n      const xValue = e[0].data[0];\n      const year = xValue < 0\n        ? `${Math.round(xValue)} BC`\n        : `${Math.round(xValue)} AD`;\n      return `${e[0].marker} ${yValue} ppm in ${year}`;\n    };\n    newOption.series = [\n      {\n        name: '',\n        type: 'line',\n        showSymbol: false,\n        data,\n        areaStyle: {\n          normal: {\n            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n              offset: 0.5,\n              color: 'rgb(255, 64, 30)',\n            }, {\n              offset: 1,\n              color: 'orange',\n            }]),\n          },\n        },\n        markLine: {\n          data: [{ x: '70%', yAxis: data[data.length - 1][1] }],\n          label: {\n            normal: {\n              formatter() { return data[data.length - 1][0]; },\n              position: 'start',\n            },\n          },\n        },\n      },\n      {\n        name: 'last',\n        type: 'scatter',\n        data: [data[data.length - 1]],\n        symbolSize: 10,\n\n      },\n    ];\n    updateOption(newOption);\n  };\n\n  useEffect(() => {\n    loadData();\n  }, []);\n\n  return (\n    <Graph>\n      <GraphTitle>Atmospheric CO2 concentration in the last 40 000 to 800 000 years</GraphTitle>\n      <GraphDescription>in ppm (particles per million)</GraphDescription>\n      <ReactEcharts\n        option={option}\n        notMerge\n      />\n      <Source>\n        Source: National Oceanic and Atmospheric Administration (NOAA) {' '}\n        <Link\n          outward\n          href=\"https://www.ncdc.noaa.gov/paleo-search/study/17975\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          Ice Core records\n        </Link>\n        {' '} (\n        <Link\n          outward\n          href=\"https://www1.ncdc.noaa.gov/pub/data/paleo/icecore/antarctica/antarctica2015co2composite.txt\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          data\n        </Link>\n        ) before 1959 and {' '}\n        <Link\n          outward\n          href=\"https://www.esrl.noaa.gov/gmd/ccgg/trends/data.html\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          Mauna Loa records\n        </Link>\n        {' '}(\n        <Link\n          outward\n          href=\"ftp://aftp.cmdl.noaa.gov/products/trends/co2/co2_annmean_mlo.txt\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          data\n        </Link>\n        ) after 1959.\n      </Source>\n    </Graph>\n  );\n};\n\nexport default AtmosphericCo2;\n"],"names":["responseText","response","ok","Error","status","statusText","text","input","init","fetch","then","Graph","styled","div","withConfig","displayName","componentId","Source","GraphTitle","GraphDescription","AtmosphericCo2","option","updateOption","useState","initialOption","useEffect","async","data","icecoreObj","mloObj","Promise","all","split","filter","d","startsWith","map","r","isFinite","reverse","forEach","push","newOption","xAxis","type","axisLabel","formatter","e","toString","min","yAxis","max","dataZoom","initialDataZoom","startValue","grid","bottom","tooltip","yValue","xValue","year","Math","round","marker","series","name","showSymbol","areaStyle","normal","color","echarts","LinearGradient","offset","markLine","x","length","label","position","symbolSize","loadData","React","ReactEcharts","notMerge","Link","outward","href","target","rel"],"sourceRoot":""}
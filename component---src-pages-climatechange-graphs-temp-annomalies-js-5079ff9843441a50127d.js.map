{"version":3,"sources":["webpack:///./node_modules/d3-dsv/src/dsv.js","webpack:///./node_modules/d3-array/src/ascending.js","webpack:///./node_modules/d3-array/src/bisector.js","webpack:///./node_modules/d3-array/src/bisect.js","webpack:///./node_modules/d3-array/src/cross.js","webpack:///./node_modules/d3-array/src/descending.js","webpack:///./node_modules/d3-array/src/number.js","webpack:///./node_modules/d3-array/src/array.js","webpack:///./node_modules/d3-array/src/range.js","webpack:///./node_modules/d3-array/src/ticks.js","webpack:///./node_modules/d3-array/src/threshold/sturges.js","webpack:///./node_modules/d3-array/src/quantile.js","webpack:///./node_modules/d3-array/src/mean.js","webpack:///./node_modules/d3-array/src/sum.js","webpack:///./src/pages/climatechange/graphs/tempAnnomalies.js"],"names":["EOL","EOF","objectConverter","columns","Function","map","name","i","JSON","stringify","join","inferColumns","rows","columnSet","Object","create","forEach","row","column","push","pad","value","width","s","length","Array","formatDate","date","year","hours","getUTCHours","minutes","getUTCMinutes","seconds","getUTCSeconds","milliseconds","getUTCMilliseconds","isNaN","getUTCFullYear","getUTCMonth","getUTCDate","reFormat","RegExp","delimiter","DELIMITER","charCodeAt","parseRows","text","f","t","N","I","n","eof","eol","token","c","j","slice","replace","preformatBody","formatValue","formatRow","Date","test","parse","convert","object","customConverter","format","concat","formatBody","formatRows","a","b","NaN","compare","d","x","ascending","left","lo","hi","mid","right","ascendingBisect","bisector","bisectRight","bisect","prototype","start","stop","step","arguments","Math","max","ceil","range","e10","sqrt","e5","e2","reverse","ticks","count","tickIncrement","isFinite","floor","power","log","LN10","error","pow","tickStep","step0","abs","step1","valueof","number","values","p","i0","value0","m","sum","Graph","styled","div","Source","GraphTitle","GraphDescription","TempAnnomalies","useState","initialOption","option","updateOption","loadData","Promise","all","marcottObj","gissObj","gissData","parseGiss","marcottData","dsvFormat","r","parseFloat","filter","marcottBaseline","delta","mean","data","newOption","xAxis","type","axisLabel","formatter","e","toString","min","yAxis","dataZoom","initialDataZoom","startValue","grid","bottom","tooltip","yValue","round","sign","xValue","marker","series","showSymbol","areaStyle","normal","color","echarts","LinearGradient","offset","markLine","label","position","symbolSize","useEffect","notMerge","outward","href","target","rel"],"mappings":"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","file":"component---src-pages-climatechange-graphs-temp-annomalies-js-5079ff9843441a50127d.js","sourcesContent":["var EOL = {},\n    EOF = {},\n    QUOTE = 34,\n    NEWLINE = 10,\n    RETURN = 13;\n\nfunction objectConverter(columns) {\n  return new Function(\"d\", \"return {\" + columns.map(function (name, i) {\n    return JSON.stringify(name) + \": d[\" + i + \"] || \\\"\\\"\";\n  }).join(\",\") + \"}\");\n}\n\nfunction customConverter(columns, f) {\n  var object = objectConverter(columns);\n  return function (row, i) {\n    return f(object(row), i, columns);\n  };\n} // Compute unique columns in order of discovery.\n\n\nfunction inferColumns(rows) {\n  var columnSet = Object.create(null),\n      columns = [];\n  rows.forEach(function (row) {\n    for (var column in row) {\n      if (!(column in columnSet)) {\n        columns.push(columnSet[column] = column);\n      }\n    }\n  });\n  return columns;\n}\n\nfunction pad(value, width) {\n  var s = value + \"\",\n      length = s.length;\n  return length < width ? new Array(width - length + 1).join(0) + s : s;\n}\n\nfunction formatYear(year) {\n  return year < 0 ? \"-\" + pad(-year, 6) : year > 9999 ? \"+\" + pad(year, 6) : pad(year, 4);\n}\n\nfunction formatDate(date) {\n  var hours = date.getUTCHours(),\n      minutes = date.getUTCMinutes(),\n      seconds = date.getUTCSeconds(),\n      milliseconds = date.getUTCMilliseconds();\n  return isNaN(date) ? \"Invalid Date\" : formatYear(date.getUTCFullYear(), 4) + \"-\" + pad(date.getUTCMonth() + 1, 2) + \"-\" + pad(date.getUTCDate(), 2) + (milliseconds ? \"T\" + pad(hours, 2) + \":\" + pad(minutes, 2) + \":\" + pad(seconds, 2) + \".\" + pad(milliseconds, 3) + \"Z\" : seconds ? \"T\" + pad(hours, 2) + \":\" + pad(minutes, 2) + \":\" + pad(seconds, 2) + \"Z\" : minutes || hours ? \"T\" + pad(hours, 2) + \":\" + pad(minutes, 2) + \"Z\" : \"\");\n}\n\nexport default function (delimiter) {\n  var reFormat = new RegExp(\"[\\\"\" + delimiter + \"\\n\\r]\"),\n      DELIMITER = delimiter.charCodeAt(0);\n\n  function parse(text, f) {\n    var convert,\n        columns,\n        rows = parseRows(text, function (row, i) {\n      if (convert) return convert(row, i - 1);\n      columns = row, convert = f ? customConverter(row, f) : objectConverter(row);\n    });\n    rows.columns = columns || [];\n    return rows;\n  }\n\n  function parseRows(text, f) {\n    var rows = [],\n        // output rows\n    N = text.length,\n        I = 0,\n        // current character index\n    n = 0,\n        // current line number\n    t,\n        // current token\n    eof = N <= 0,\n        // current token followed by EOF?\n    eol = false; // current token followed by EOL?\n    // Strip the trailing newline.\n\n    if (text.charCodeAt(N - 1) === NEWLINE) --N;\n    if (text.charCodeAt(N - 1) === RETURN) --N;\n\n    function token() {\n      if (eof) return EOF;\n      if (eol) return eol = false, EOL; // Unescape quotes.\n\n      var i,\n          j = I,\n          c;\n\n      if (text.charCodeAt(j) === QUOTE) {\n        while (I++ < N && text.charCodeAt(I) !== QUOTE || text.charCodeAt(++I) === QUOTE) {\n          ;\n        }\n\n        if ((i = I) >= N) eof = true;else if ((c = text.charCodeAt(I++)) === NEWLINE) eol = true;else if (c === RETURN) {\n          eol = true;\n          if (text.charCodeAt(I) === NEWLINE) ++I;\n        }\n        return text.slice(j + 1, i - 1).replace(/\"\"/g, \"\\\"\");\n      } // Find next delimiter or newline.\n\n\n      while (I < N) {\n        if ((c = text.charCodeAt(i = I++)) === NEWLINE) eol = true;else if (c === RETURN) {\n          eol = true;\n          if (text.charCodeAt(I) === NEWLINE) ++I;\n        } else if (c !== DELIMITER) continue;\n        return text.slice(j, i);\n      } // Return last token before EOF.\n\n\n      return eof = true, text.slice(j, N);\n    }\n\n    while ((t = token()) !== EOF) {\n      var row = [];\n\n      while (t !== EOL && t !== EOF) {\n        row.push(t), t = token();\n      }\n\n      if (f && (row = f(row, n++)) == null) continue;\n      rows.push(row);\n    }\n\n    return rows;\n  }\n\n  function preformatBody(rows, columns) {\n    return rows.map(function (row) {\n      return columns.map(function (column) {\n        return formatValue(row[column]);\n      }).join(delimiter);\n    });\n  }\n\n  function format(rows, columns) {\n    if (columns == null) columns = inferColumns(rows);\n    return [columns.map(formatValue).join(delimiter)].concat(preformatBody(rows, columns)).join(\"\\n\");\n  }\n\n  function formatBody(rows, columns) {\n    if (columns == null) columns = inferColumns(rows);\n    return preformatBody(rows, columns).join(\"\\n\");\n  }\n\n  function formatRows(rows) {\n    return rows.map(formatRow).join(\"\\n\");\n  }\n\n  function formatRow(row) {\n    return row.map(formatValue).join(delimiter);\n  }\n\n  function formatValue(value) {\n    return value == null ? \"\" : value instanceof Date ? formatDate(value) : reFormat.test(value += \"\") ? \"\\\"\" + value.replace(/\"/g, \"\\\"\\\"\") + \"\\\"\" : value;\n  }\n\n  return {\n    parse: parse,\n    parseRows: parseRows,\n    format: format,\n    formatBody: formatBody,\n    formatRows: formatRows,\n    formatRow: formatRow,\n    formatValue: formatValue\n  };\n}","export default function (a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}","import ascending from \"./ascending\";\nexport default function (compare) {\n  if (compare.length === 1) compare = ascendingComparator(compare);\n  return {\n    left: function left(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) < 0) lo = mid + 1;else hi = mid;\n      }\n\n      return lo;\n    },\n    right: function right(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) > 0) hi = mid;else lo = mid + 1;\n      }\n\n      return lo;\n    }\n  };\n}\n\nfunction ascendingComparator(f) {\n  return function (d, x) {\n    return ascending(f(d), x);\n  };\n}","import ascending from \"./ascending\";\nimport bisector from \"./bisector\";\nvar ascendingBisect = bisector(ascending);\nexport var bisectRight = ascendingBisect.right;\nexport var bisectLeft = ascendingBisect.left;\nexport default bisectRight;","import { pair } from \"./pairs\";\nexport default function (values0, values1, reduce) {\n  var n0 = values0.length,\n      n1 = values1.length,\n      values = new Array(n0 * n1),\n      i0,\n      i1,\n      i,\n      value0;\n  if (reduce == null) reduce = pair;\n\n  for (i0 = i = 0; i0 < n0; ++i0) {\n    for (value0 = values0[i0], i1 = 0; i1 < n1; ++i1, ++i) {\n      values[i] = reduce(value0, values1[i1]);\n    }\n  }\n\n  return values;\n}","export default function (a, b) {\n  return b < a ? -1 : b > a ? 1 : b >= a ? 0 : NaN;\n}","export default function (x) {\n  return x === null ? NaN : +x;\n}","var array = Array.prototype;\nexport var slice = array.slice;\nexport var map = array.map;","export default function (start, stop, step) {\n  start = +start, stop = +stop, step = (n = arguments.length) < 2 ? (stop = start, start = 0, 1) : n < 3 ? 1 : +step;\n  var i = -1,\n      n = Math.max(0, Math.ceil((stop - start) / step)) | 0,\n      range = new Array(n);\n\n  while (++i < n) {\n    range[i] = start + i * step;\n  }\n\n  return range;\n}","var e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\nexport default function (start, stop, count) {\n  var reverse,\n      i = -1,\n      n,\n      ticks,\n      step;\n  stop = +stop, start = +start, count = +count;\n  if (start === stop && count > 0) return [start];\n  if (reverse = stop < start) n = start, start = stop, stop = n;\n  if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) return [];\n\n  if (step > 0) {\n    start = Math.ceil(start / step);\n    stop = Math.floor(stop / step);\n    ticks = new Array(n = Math.ceil(stop - start + 1));\n\n    while (++i < n) {\n      ticks[i] = (start + i) * step;\n    }\n  } else {\n    start = Math.floor(start * step);\n    stop = Math.ceil(stop * step);\n    ticks = new Array(n = Math.ceil(start - stop + 1));\n\n    while (++i < n) {\n      ticks[i] = (start - i) / step;\n    }\n  }\n\n  if (reverse) ticks.reverse();\n  return ticks;\n}\nexport function tickIncrement(start, stop, count) {\n  var step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log(step) / Math.LN10),\n      error = step / Math.pow(10, power);\n  return power >= 0 ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power) : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n}\nexport function tickStep(start, stop, count) {\n  var step0 = Math.abs(stop - start) / Math.max(0, count),\n      step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n      error = step0 / step1;\n  if (error >= e10) step1 *= 10;else if (error >= e5) step1 *= 5;else if (error >= e2) step1 *= 2;\n  return stop < start ? -step1 : step1;\n}","export default function (values) {\n  return Math.ceil(Math.log(values.length) / Math.LN2) + 1;\n}","import number from \"./number\";\nexport default function (values, p, valueof) {\n  if (valueof == null) valueof = number;\n  if (!(n = values.length)) return;\n  if ((p = +p) <= 0 || n < 2) return +valueof(values[0], 0, values);\n  if (p >= 1) return +valueof(values[n - 1], n - 1, values);\n  var n,\n      i = (n - 1) * p,\n      i0 = Math.floor(i),\n      value0 = +valueof(values[i0], i0, values),\n      value1 = +valueof(values[i0 + 1], i0 + 1, values);\n  return value0 + (value1 - value0) * (i - i0);\n}","import number from \"./number\";\nexport default function (values, valueof) {\n  var n = values.length,\n      m = n,\n      i = -1,\n      value,\n      sum = 0;\n\n  if (valueof == null) {\n    while (++i < n) {\n      if (!isNaN(value = number(values[i]))) sum += value;else --m;\n    }\n  } else {\n    while (++i < n) {\n      if (!isNaN(value = number(valueof(values[i], i, values)))) sum += value;else --m;\n    }\n  }\n\n  if (m) return sum / m;\n}","export default function (values, valueof) {\n  var n = values.length,\n      i = -1,\n      value,\n      sum = 0;\n\n  if (valueof == null) {\n    while (++i < n) {\n      if (value = +values[i]) sum += value; // Note: zero and null are equivalent.\n    }\n  } else {\n    while (++i < n) {\n      if (value = +valueof(values[i], i, values)) sum += value;\n    }\n  }\n\n  return sum;\n}","import React, { useState, useEffect } from 'react';\nimport ReactEcharts from 'echarts-for-react';\nimport * as echarts from 'echarts';\nimport { text } from 'd3-fetch';\nimport { dsvFormat } from 'd3-dsv';\nimport { mean } from 'd3-array';\nimport styled from 'styled-components';\n\nimport { Link } from 'gatsby';\nimport { initialOption, parseGiss, initialDataZoom } from './common';\n\nconst Graph = styled.div`\n   width: 100%;\n    box-sizing: border-box;\n    margin-right: auto;\n    margin-left: auto;\n    padding-top: 1.5em;\n    padding-bottom: 1.5em;\n`;\n\nconst Source = styled.div`\n  font-size: small;\n`;\n\nconst GraphTitle = styled.div`\n  font-weight: bold;\n`;\n\nconst GraphDescription = styled.div`\n`;\n\n\nconst TempAnnomalies = () => {\n  const [option, updateOption] = useState(initialOption());\n\n  const loadData = async () => {\n    const [marcottObj, gissObj] = await Promise.all([\n      text('/data/marcott2013.csv'),\n      text('/data/647_Global_Temperature_Data_File.txt'),\n    ]);\n\n    const gissData = parseGiss(gissObj).map(d => [+d[0], +d[1]]);\n\n    const marcottData = dsvFormat(';').parse(marcottObj)\n      .map(r => [1950 - +r['Age (yrs BP)'], parseFloat(r['Global (°C)'].replace(',', '.'))])\n      // eslint-disable-next-line no-restricted-globals\n      .filter(d => isFinite(d[1]) && d[0] < gissData[0][0])\n      .reverse();\n\n    // Make sure to convert the baseline to the giss one\n    const marcottBaseline = [1961, 1990];\n    const delta = mean(\n      gissData.filter(d => d[0] >= marcottBaseline[0] && d[1] <= marcottBaseline[1]), d => d[1],\n    );\n\n    const data = marcottData.map(d => [d[0], d[1] - delta]);\n\n    gissData.forEach((d) => { data.push(d); });\n\n    const newOption = initialOption();\n\n    newOption.xAxis.type = 'value';\n    newOption.xAxis.axisLabel = {\n      formatter(e) { return e.toString(); },\n    };\n    newOption.xAxis.min = -9000;\n    newOption.xAxis.max = data[data.length - 1][0];\n\n    newOption.yAxis.min = -0.7;\n    newOption.yAxis.max = 1.2;\n\n    newOption.dataZoom = initialDataZoom();\n    newOption.dataZoom[0].startValue = -9000;\n\n    newOption.grid.bottom = 60;\n\n    newOption.tooltip.formatter = (e) => {\n      const yValue = Math.round(e[0].data[1] * 100) / 100;\n      const sign = yValue >= 0 ? '+' : '';\n      const xValue = e[0].data[0];\n      const year = xValue < 0 ? `${xValue} BC` : `${xValue} AD`;\n      return `${e[0].marker}${sign}${yValue} °C in ${year}`;\n    };\n\n    newOption.series = [\n      {\n        name: 'marcott',\n        type: 'line',\n        showSymbol: false,\n        data,\n        areaStyle: {\n          normal: {\n            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n              offset: -1 * newOption.yAxis.min / newOption.yAxis.max - 0.2,\n              color: 'rgb(255, 64, 30)',\n            }, {\n              offset: 1,\n              color: 'rgb(180, 200, 255)',\n            }]),\n          },\n        },\n        markLine: {\n          data: [{ yAxis: data[data.length - 1][1], x: '70%' }],\n          label: {\n            normal: {\n              formatter() { return data[data.length - 1][0]; },\n              position: 'start',\n            },\n          },\n        },\n      },\n      {\n        name: 'last',\n        type: 'scatter',\n        data: [data[data.length - 1]],\n        symbolSize: 10,\n      },\n    ];\n    updateOption(newOption);\n  };\n\n  useEffect(() => {\n    loadData();\n  }, []);\n\n  return (\n    <Graph>\n      <GraphTitle>Temperature anomalies in the last 11 000 years</GraphTitle>\n      <GraphDescription>&deg;C compared to 1951-1980 average</GraphDescription>\n      <ReactEcharts\n        option={option}\n        notMerge\n      />\n      <Source>\n        Source:\n        {' '}\n        <Link outward href=\"http://science.sciencemag.org/content/339/6124/1198\" target=\"_blank\" rel=\"noopener noreferrer\">A Reconstruction of Regional and Global Temperature for the Past 11,300 Years</Link>\n        {' '}\n        (\n        <Link outward href=\"http://science.sciencemag.org/content/suppl/2013/03/07/339.6124.1198.DC1\" target=\"_blank\" rel=\"noopener noreferrer\">data</Link>\n        ) before 1880,\n        {' '}\n        <Link outward href=\"https://climate.nasa.gov/vital-signs/global-temperature/\" target=\"_blank\" rel=\"noopener noreferrer\">NASA&quot;s Goddard Institute for Space Studies (GISS)</Link>\n        {' '}\n        (\n        <Link outward href=\"http://climate.nasa.gov/system/internal_resources/details/original/647_Global_Temperature_Data_File.txt\" target=\"_blank\" rel=\"noopener noreferrer\">data</Link>\n        ) after 1880\n      </Source>\n    </Graph>\n  );\n};\n\nexport default TempAnnomalies;\n"],"sourceRoot":""}
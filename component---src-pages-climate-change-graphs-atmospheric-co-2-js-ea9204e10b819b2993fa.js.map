{"version":3,"sources":["webpack:///./src/pages/climate-change/graphs/atmosphericCo2.js"],"names":["Graph","styled","div","Source","GraphTitle","GraphDescription","AtmosphericCo2","useState","initialOption","option","updateOption","loadData","a","data","splitDate","Promise","all","text","icecoreObj","mloObj","split","filter","d","i","map","r","isFinite","reverse","forEach","push","newOption","xAxis","type","axisLabel","formatter","e","toString","min","yAxis","max","dataZoom","initialDataZoom","startValue","grid","bottom","tooltip","yValue","xValue","year","Math","round","marker","series","name","showSymbol","areaStyle","normal","color","echarts","LinearGradient","offset","markLine","x","length","label","position","symbolSize","useEffect","notMerge","outward","href","target","rel"],"mappings":"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","file":"component---src-pages-climate-change-graphs-atmospheric-co-2-js-ea9204e10b819b2993fa.js","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport ReactEcharts from 'echarts-for-react';\nimport * as echarts from 'echarts';\nimport { text } from 'd3-fetch';\nimport styled from 'styled-components';\n\nimport { Link } from 'gatsby';\nimport { initialOption, initialDataZoom } from './common';\n\nconst Graph = styled.div`\n   width: 100%;\n    box-sizing: border-box;\n    margin-right: auto;\n    margin-left: auto;\n    padding-top: 1.5em;\n    padding-bottom: 1.5em;\n`;\n\nconst Source = styled.div`\n  font-size: small;\n`;\n\nconst GraphTitle = styled.div`\n  font-weight: bold;\n`;\n\nconst GraphDescription = styled.div`\n`;\n\nconst AtmosphericCo2 = () => {\n  const [option, updateOption] = useState(initialOption());\n\n  const loadData = async () => {\n    const data = [];\n    const splitDate = 1959;\n\n    const [icecoreObj, mloObj] = await Promise.all([\n      text('/data/antarctica2015co2composite.txt'),\n      text('/data/co2_annmean_mlo.txt'),\n    ]);\n\n    icecoreObj.split('\\n')\n      .filter((d, i) => i >= 138)\n      .map((d) => {\n        const r = d.split('\\t');\n        return [1950 - +r[0], +r[1]];\n      })\n      // eslint-disable-next-line no-restricted-globals\n      .filter(d => d[0] < splitDate && isFinite(d[1]))\n      .reverse()\n      .forEach((d) => {\n        data.push(d);\n      });\n\n    mloObj.split('\\n')\n      .filter(d => d[0] !== '#')\n      .map((d) => {\n        const r = d.split('   ');\n        return [+r[0], +r[1]];\n      })\n      .filter(d => d[0] >= splitDate)\n      .forEach((d) => { data.push(d); });\n\n    const newOption = initialOption();\n\n    newOption.xAxis.type = 'value';\n    newOption.xAxis.axisLabel = {\n      formatter(e) { return e.toString(); },\n    };\n    newOption.xAxis.min = -900000;\n    newOption.yAxis.min = 150;\n    newOption.yAxis.max = 420;\n\n    newOption.dataZoom = initialDataZoom();\n    newOption.dataZoom[0].startValue = -40000;\n\n    newOption.grid.bottom = 60;\n\n    newOption.tooltip.formatter = (e) => {\n      const yValue = e[0].data[1];\n      const xValue = e[0].data[0];\n      const year = xValue < 0\n        ? `${Math.round(xValue)} BC`\n        : `${Math.round(xValue)} AD`;\n      return `${e[0].marker} ${yValue} ppm in ${year}`;\n    };\n    newOption.series = [\n      {\n        name: '',\n        type: 'line',\n        showSymbol: false,\n        data,\n        areaStyle: {\n          normal: {\n            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n              offset: 0.5,\n              color: 'rgb(255, 64, 30)',\n            }, {\n              offset: 1,\n              color: 'orange',\n            }]),\n          },\n        },\n        markLine: {\n          data: [{ x: '70%', yAxis: data[data.length - 1][1] }],\n          label: {\n            normal: {\n              formatter() { return data[data.length - 1][0]; },\n              position: 'start',\n            },\n          },\n        },\n      },\n      {\n        name: 'last',\n        type: 'scatter',\n        data: [data[data.length - 1]],\n        symbolSize: 10,\n\n      },\n    ];\n    updateOption(newOption);\n  };\n\n  useEffect(() => {\n    loadData();\n  }, []);\n\n  return (\n    <Graph>\n      <GraphTitle>Atmospheric CO2 concentration in the last 40&nbsp;000 to 800&nbsp;000 years</GraphTitle>\n      <GraphDescription>in ppm (particles per million)</GraphDescription>\n      <ReactEcharts\n        option={option}\n        notMerge\n      />\n      <Source>\n        Source: National Oceanic and Atmospheric Administration (NOAA) {' '}\n        <Link\n          outward\n          href=\"https://www.ncdc.noaa.gov/paleo-search/study/17975\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          Ice Core records\n        </Link>\n        {' '} (\n        <Link\n          outward\n          href=\"https://www1.ncdc.noaa.gov/pub/data/paleo/icecore/antarctica/antarctica2015co2composite.txt\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          data\n        </Link>\n        ) before 1959 and {' '}\n        <Link\n          outward\n          href=\"https://www.esrl.noaa.gov/gmd/ccgg/trends/data.html\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          Mauna Loa records\n        </Link>\n        {' '}(\n        <Link\n          outward\n          href=\"ftp://aftp.cmdl.noaa.gov/products/trends/co2/co2_annmean_mlo.txt\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          data\n        </Link>\n        ) after 1959.\n      </Source>\n    </Graph>\n  );\n};\n\nexport default AtmosphericCo2;\n"],"sourceRoot":""}